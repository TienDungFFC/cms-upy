(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user-management"],{"08f2":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"find-user"},[a("div",{staticClass:"position-relative text-white px-2 py-3 bg-header-mb"},[a("i",{staticClass:"icon ion-md-arrow-back position-absolute h4",on:{click:function(e){return t.$router.go(-1)}}}),a("h5",{staticClass:"font-weight-bold text-center mb-0"},[t._v("Tìm kiếm người dùng")])]),a("div",{staticClass:"px-2 mt-3"},[a("div",{staticClass:"position-relative"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],ref:"input",staticClass:"form-control size-input",attrs:{placeholder:"Tìm kiếm theo tên hoặc số điện thoại"},domProps:{value:t.keyword},on:{input:[function(e){e.target.composing||(t.keyword=e.target.value)},function(e){return t.search(e,"auto")}],Keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e,"active")}}}),""!==t.keyword?a("span",{staticClass:"position-absolute",staticStyle:{top:"50%",right:"6px",transform:"translateY(-50%)"},on:{click:function(e){return t.clearKeyword()}}},[a("i",{staticClass:"icon ion-md-close-circle-outline",staticStyle:{color:"#d5d5d5","font-size":"18px"}})]):t._e()]),a("div",[a("ul",t._l(t.users,(function(e,n){return a("li",{key:n,class:{"p-3 mt-1 bg-light":!0,"text-primary font-weight-bold":t.id_user===e.id},on:{click:function(a){return t.selected(e)}}},[t._v(t._s(e.name+"-("+e.phone+")"))])})),0)])])])},r=[],s=a("0949"),i={data:function(){var t,e;return{users:[],user:"",id_user:null!==(t=this.$route.query)&&void 0!==t&&t.id?this.$route.query.id:"",keyword:null!==(e=this.$route.query)&&void 0!==e&&e.keyword?this.$route.query.keyword:""}},created:function(){this.getData()},mounted:function(){this.focusInput()},methods:{focusInput:function(){var t=this.$refs.input;t&&t.focus()},getData:function(){var t=this,e={keyword:this.keyword};Object(s["c"])(e).then((function(e){t.users=e.data.data}))},search:function(t,e){var a=this;t&&(this.keyword=t.target.value),"auto"===e?(this.timeOut&&clearTimeout(this.timeOut),this.timeOut=setTimeout((function(){a.getData()}),500)):this.getData()},selected:function(t){this.$router.push({name:"loan-amount",query:{id_user:t.id,keywordMb:this.keyword}})},clearKeyword:function(){this.keyword="",this.getData()}}},o=i,c=a("2877"),l=Object(c["a"])(o,n,r,!1,null,null,null);e["default"]=l.exports},"0949":function(t,e,a){"use strict";a.d(e,"c",(function(){return s})),a.d(e,"b",(function(){return i})),a.d(e,"d",(function(){return o})),a.d(e,"a",(function(){return c}));var n=a("1da1"),r=(a("96cf"),a("e63b")),s=function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["b"])("/admin/v1/user",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i=function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["b"])("/admin/v1/user/".concat(e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o=function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["d"])("/admin/v1/user/".concat(e),a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),c=function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["a"])("/admin/v1/user/".concat(e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},1938:function(t,e,a){"use strict";a.d(e,"b",(function(){return s})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return o}));var n=a("1da1"),r=(a("96cf"),a("e63b")),s=function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["b"])("/admin/v1/manager_loan_contract/".concat(e,"/loan-info"));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i=function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["b"])("/admin/v1/manager_loan_contract",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o=function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["b"])("/admin/v1/manager_loan_contract/payment-period",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},2405:function(t,e,a){"use strict";a("62d3")},"62d3":function(t,e,a){},"6d12":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user-management container-fluid"},["web"===t.$detect?a("div",{staticClass:"d-flex align-items-end justify-content-end pb-4"},[a("div",{staticClass:"mr-3"},[a("label",{staticClass:"font-weight-bold"},[t._v("Tìm kiếm người dùng")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.keywordUser,expression:"keywordUser"}],staticClass:"form-control size-input",attrs:{type:"text",placeholder:"Tìm kiếm người dùng"},domProps:{value:t.keywordUser},on:{input:[function(e){e.target.composing||(t.keywordUser=e.target.value)},t.searchUser]}})]),t.$isAdmin()?a("div",{staticClass:"mr-3"},[a("label",{staticClass:"font-weight-bold"},[t._v("Tìm công ty")]),a("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.outsideSearch,expression:"outsideSearch"}],staticClass:"search"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.keywordCompany,expression:"keywordCompany"}],staticClass:"form-control size-input",attrs:{type:"text",placeholder:"Tìm kiếm công ty"},domProps:{value:t.keywordCompany},on:{focus:function(e){return t.focusSearch("web")},input:[function(e){e.target.composing||(t.keywordCompany=e.target.value)},t.searchCompany]}}),t.showSearch?a("ul",{staticClass:"company-list"},[""==t.keywordCompany?t._l(t.companies,(function(e,n){return a("li",{key:n,staticClass:"company-item",on:{click:function(a){return t.search(e)}}},[t._v(" "+t._s(e.name)+" ")])})):[t._l(t.companies,(function(e,n){return a("li",{key:n,staticClass:"company-item",on:{click:function(a){return t.search(e)}}},[t._v(" "+t._s(e.name)+" ")])})),0===t.companies.length?a("li",{staticClass:"company-item text-center text-black-50"},[t.loading?a("span",[t._v("Đang tìm kiếm")]):a("span",[t._v("Không có dữ liệu")])]):t._e()]],2):t._e()])]):t._e(),a("div",{staticClass:"mr-3"},[a("label",{staticClass:"font-weight-bold"},[t._v("Lọc trạng thái")]),a("ldc-select",{staticClass:"size-input",staticStyle:{width:"100%"},attrs:{placeholder:"Lọc trạng thái"},on:{change:t.changeActive},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.optionsActive,(function(t){return a("ldc-option",{key:t.value,attrs:{value:t.value,label:t.label}})})),1)],1),a("div",{staticClass:"mr-3"},[a("label",{staticClass:"font-weight-bold"},[t._v("Lọc tài khoản")]),a("ldc-select",{staticClass:"size-input",staticStyle:{width:"100%"},attrs:{placeholder:"Loại tài khoản"},on:{change:t.changeActive},model:{value:t.borrowed_money,callback:function(e){t.borrowed_money=e},expression:"borrowed_money"}},t._l(t.optionsType,(function(t){return a("ldc-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("div",[a("button",{staticClass:"btn btn-secondary",staticStyle:{height:"32px",width:"80px"},attrs:{disabled:""===t.active&&""===t.keywordUser&&""===t.borrowed_money&&""===t.keywordCompany&&""===t.id_business},on:{click:function(e){return t.clearFilter()}}},[t._v(" Bỏ lọc ")])])]):t._e(),"mobile"===t.$detect?a("div",{staticClass:"filter d-flex align-items-center justify-content-between mt-3"},[a("div",{staticClass:"position-relative w-100 mr-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.keywordUser,expression:"keywordUser"}],staticClass:"form-control size-input",attrs:{type:"text",placeholder:"Tìm kiếm người dùng"},domProps:{value:t.keywordUser},on:{input:[function(e){e.target.composing||(t.keywordUser=e.target.value)},t.searchUser]}}),""!==t.keywordUser?a("span",{staticClass:"position-absolute",staticStyle:{top:"50%",right:"6px",transform:"translateY(-50%)"},on:{click:function(e){return t.clearKeywordUser()}}},[a("i",{staticClass:"icon ion-md-close-circle-outline",staticStyle:{color:"#d5d5d5","font-size":"18px"}})]):t._e()]),a("i",{staticClass:"h3 icon ion-md-funnel mb-0 py-2",on:{click:function(e){t.dialog=!0}}})]):t._e(),"mobile"===t.$detect?a("div",[a("ldc-model-mobile",{attrs:{titileCancel:"Hủy",showCancel:!1,showTitle:!0,title:"Tìm kiếm nâng cao",customButton:!0,visible:t.dialog},on:{"update:visible":function(e){t.dialog=e}}},[a("div",{attrs:{slot:"content-model"},slot:"content-model"},[t.$isAdmin()?a("div",{class:{"mx-2 position-relative":!0,"mt-2":t.$isAndroid}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.keywordCompany,expression:"keywordCompany"}],staticClass:"form-control size-input",attrs:{type:"text",placeholder:"Tìm kiếm công ty"},domProps:{value:t.keywordCompany},on:{focus:function(e){return t.focusSearch("mobile")},input:function(e){e.target.composing||(t.keywordCompany=e.target.value)}}}),""!==t.keywordCompany?a("span",{staticClass:"position-absolute",staticStyle:{top:"50%",right:"6px",transform:"translateY(-50%)"},on:{click:function(e){return t.clearKeywordCompany()}}},[a("i",{staticClass:"icon ion-md-close-circle-outline",staticStyle:{color:"#d5d5d5","font-size":"18px"}})]):t._e()]):t._e(),a("ldc-select-show-option",{attrs:{placeholder:"Lọc trạng thái"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.optionsActive,(function(t){return a("ldc-option-show",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),a("ldc-select-show-option",{attrs:{placeholder:"Lọc tài khoản"},model:{value:t.borrowed_money,callback:function(e){t.borrowed_money=e},expression:"borrowed_money"}},t._l(t.optionsType,(function(t){return a("ldc-option-show",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("div",{attrs:{slot:"custom-buttom"},slot:"custom-buttom"},[a("div",{class:{"btn-confirm-android":t.$isAndroid,"btn-confirm-ios mb-10px btn-custom-ios":!t.$isAndroid}},[a("button",{staticClass:"btn btn-primary radius-ios text-uppercase mr-10px fs-14px btn-apply",attrs:{"close-model-mobile":""},on:{click:function(e){return t.changeUrl()}}},[t._v("áp dụng")]),a("button",{staticClass:"btn btn-light radius-ios text-uppercase ml-10px fs-14px btn-cancel",attrs:{"close-model-mobile":""},on:{click:function(e){return t.clearFilter()}}},[t._v("Bỏ lọc")])])])])],1):t._e(),a("div",{class:{row:"web"===t.$detect,"row bg-white position-relative mt-3":"mobile"===t.$detect}},[a("div",{staticClass:"col-12 border-bottom"},[a("div",{staticClass:"table-responsive"},[a("table",{class:{"table table-striped":!0,"table-mobie":"mobile"===t.$detect}},[t._m(0),a("tbody",[t._l(t.users,(function(e,n){return a("tr",{key:n},[a("td",[t._v(t._s(e.user_id))]),a("td",[a("router-link",{staticClass:"format-link",attrs:{to:t.goDetail(e)}},[t._v(" "+t._s(e.name)+" ")])],1),a("td",[t._v(t._s(e.phone))]),a("td",[e.bad_bebit?a("span",[t._v("Có")]):a("span",[t._v("Không")])]),a("td",[t._v(t._s(e.business?e.business.data.name:e.name_business))]),a("td",[t._v(" "+t._s(e.borrowed_money)+" ")]),a("td",[1==e.active?a("span",{staticClass:"text-success"},[t._v("Hoạt động")]):a("span",{staticClass:"text-danger"},[t._v("Tạm khóa")])]),a("td",[a("router-link",{attrs:{to:t.goDetail(e)}},[a("button",{staticClass:"btn btn-primary mr-2"},[t._v(" Chi tiết ")])]),t.$myCanDelete()?a("button",{staticClass:"btn btn-danger",on:{click:function(a){return t.destroy(e)}}},[t._v(" xóa ")]):t._e()],1)])})),a("no-data",{attrs:{data:t.users,colspan:8}})],2)])])]),a("div",{staticClass:"col-12 d-flex justify-content-end"},[a("ldc-pagination",{staticClass:"pt-4",attrs:{current_page:t.page,last_page:t.totalPages,scroll_top:!0,callData:t.changePage}})],1)])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("ID")]),a("th",[t._v("Họ tên")]),a("th",[t._v("Số điện thoại")]),a("th",[t._v("Nợ xấu")]),a("th",[t._v("Công ty")]),a("th",[t._v("Loại User")]),a("th",[t._v("Trạng thái")]),a("th",{staticClass:"text-center",staticStyle:{"min-width":"150px"},attrs:{width:"150px"}},[t._v(" Hành động ")])])])}],s=a("1da1"),i=(a("96cf"),a("b0c0"),a("0949")),o=a("8ca7"),c=a("fb12"),l=[{value:0,label:"Thường"},{value:1,label:"Đã vay tiền"}],u={data:function(){var t,e;return{dialog:!1,users:[],companies:[],optionsActive:c["a"],optionsType:l,active:this.$route.query.active?parseInt(this.$route.query.active):"",borrowed_money:this.$route.query.borrowed_money?parseInt(this.$route.query.borrowed_money):"",id_business:null!==(t=this.$route.query)&&void 0!==t&&t.id_business?this.$route.query.id_business:"",keywordUser:null!==(e=this.$route.query)&&void 0!==e&&e.keyword?this.$route.query.keyword:"",keywordCompany:"",page:this.$route.query.page?parseInt(this.$route.query.page):1,totalPages:0,timeOut:null,showSearch:!1,loading:!1}},computed:{query:function(){return this.$route.query}},watch:{query:function(t){this.getData()}},created:function(){this.getData(),this.getCompany()},methods:{getCompany:function(){var t=this;Object(o["d"])().then((function(e){t.companies=e.data.data,t.setCompany()}))},setCompany:function(){var t=this;this.$route.query.id_business&&Object(o["c"])(this.$route.query.id_business).then((function(e){t.keywordCompany="".concat(e.data.data?e.data.data.name:"")}))},getData:function(){var t=this,e=this.setQuery();Object(i["c"])(e).then((function(e){if(e.data.success===API_STATUS_SUCCESS){t.users=e.data.data;var a=e.data.meta.pagination;t.page=a.current_page,t.totalPages=a.total_pages}else t.$showMessage(e.data.message,"warning")}))},changePage:function(t){this.page=t,this.changeUrl()},changeActive:function(){this.page=1,this.changeUrl()},changeUrl:function(){this.$router.push({name:"user",query:this.setQuery()})},searchUser:function(t){var e=this;t&&(this.keywordUser=t.target.value),this.timeOut&&clearTimeout(this.timeOut),this.timeOut=setTimeout((function(){e.page=1,e.changeUrl()}),500)},setQuery:function(){var t={};return""!==this.active&&(t.active=parseInt(this.active)),""!==this.borrowed_money&&(t.borrowed_money=this.borrowed_money),""!==this.id_business&&(t.id_business=this.id_business),""!==this.keywordUser&&(t.keyword=this.keywordUser),this.page>1&&(t.page=this.page),t},destroy:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.$myCanDelete()){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,e.$confirm("Bạn có chắc muốn xóa người dùng <b>".concat(t.name,"</b>"),"Xóa người dùng",{confirmButtonText:"Đồng ý",cancelButtonText:"Hủy",type:"error"}).then(Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.loading=!0,a.next=3,Object(i["a"])(t.id).then((function(t){t.data.data.success===API_STATUS_SUCCESS?(e.$showMessage(t.data.data.message,"success"),e.getData()):e.$showMessage(t.data.data.message,"warning")})).catch((function(t){t.status==HTTP_CODE_GONE&&e.$showMessage(t.data.data.message,"warning")}));case 3:e.loading=!1;case 4:case"end":return a.stop()}}),a)})))).catch((function(){}));case 4:case"end":return a.stop()}}),a)})))()},searchCompany:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t&&(e.keywordCompany=t.target.value),e.companies=[],e.loading=!0,n={},n.keyword=e.keywordCompany,a.next=7,Object(o["d"])(n).then((function(t){t.data.success===API_STATUS_SUCCESS?(e.companies=t.data.data,e.loading=!1):e.$showMessage(t.data.message,"warning")}));case 7:case"end":return a.stop()}}),a)})))()},search:function(t){this.page=1,this.keywordCompany=t.name,this.id_business=t.id,this.showSearch=!1,this.changeUrl()},focusSearch:function(t){var e;"web"===t?this.showSearch=!0:this.$router.push({name:"user-find-company",query:{id:this.$route.query.id_business,keyword:null!==(e=this.$route.query)&&void 0!==e&&e.keywordCompanyMb?this.$route.query.keywordCompanyMb:""}})},outsideSearch:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.showSearch=!1;case 1:case"end":return e.stop()}}),e)})))()},clearKeywordUser:function(){this.keywordUser="",this.page=1,this.changeUrl()},clearKeywordCompany:function(){this.keywordCompany="",this.id_business="",this.page=1,this.changeUrl()},clearFilter:function(){this.id_business="",this.keywordUser="",this.keywordCompany="",this.active="",this.borrowed_money="",this.getCompany(),this.changeUrl()},goDetail:function(t){return{name:"user-show",params:{id:t.id},query:{redirect:this.$encodeRedirect(this.setQuery())}}}}},d=u,m=(a("d26a"),a("2877")),p=Object(m["a"])(d,n,r,!1,null,null,null);e["default"]=p.exports},"8ca7":function(t,e,a){"use strict";a.d(e,"d",(function(){return s})),a.d(e,"a",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"f",(function(){return c})),a.d(e,"b",(function(){return l})),a.d(e,"e",(function(){return u}));var n=a("1da1"),r=(a("96cf"),a("e63b")),s=function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["b"])("/admin/v1/partner",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i=function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["c"])("/admin/v1/partner",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o=function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["b"])("/admin/v1/partner/".concat(e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),c=function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["d"])("/admin/v1/partner/".concat(e),a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),l=function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["b"])("/admin/v1/partner/my_partner");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),u=function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["d"])("/admin/v1/partner/",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},"8f39":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"find-company"},[a("div",{staticClass:"position-relative text-white px-2 py-3 bg-header-mb"},[a("i",{staticClass:"icon ion-md-arrow-back position-absolute h4",on:{click:function(e){return t.$router.go(-1)}}}),a("p",{staticClass:"text-center h5 mb-0 font-weight-normal"},[t._v("Tìm kiếm công ty")])]),a("div",{staticClass:"px-2 mt-3"},[a("div",{staticClass:"position-relative"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],ref:"input",staticClass:"form-control size-input",attrs:{placeholder:"Tìm kiếm công ty"},domProps:{value:t.keyword},on:{input:[function(e){e.target.composing||(t.keyword=e.target.value)},function(e){return t.search(e,"auto")}],keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e,"active")}}}),""!==t.keyword?a("span",{staticClass:"position-absolute",staticStyle:{top:"50%",right:"6px",transform:"translateY(-50%)"},on:{click:function(e){return t.clearKeyword()}}},[a("i",{staticClass:"icon ion-md-close-circle-outline",staticStyle:{color:"#d5d5d5","font-size":"18px"}})]):t._e()]),a("div",[a("ul",t._l(t.companies,(function(e,n){return a("li",{key:n,class:{"p-3 mt-1 bg-light":!0,"text-primary font-weight-bold":t.id_business===e.id},on:{click:function(a){return t.selected(e)}}},[t._v(t._s(e.name))])})),0)])])])},r=[],s=a("8ca7"),i={data:function(){var t,e;return{companies:[],company:"",id_business:null!==(t=this.$route.query)&&void 0!==t&&t.id?this.$route.query.id:"",keyword:null!==(e=this.$route.query)&&void 0!==e&&e.keyword?this.$route.query.keyword:""}},created:function(){this.getData()},mounted:function(){this.focusInput()},methods:{focusInput:function(){var t=this.$refs.input;t&&t.focus()},getData:function(){var t=this,e={keyword:this.keyword};Object(s["d"])(e).then((function(e){t.companies=e.data.data}))},search:function(t,e){var a=this;t&&(this.keyword=t.target.value),"auto"===e?(this.timeOut&&clearTimeout(this.timeOut),this.timeOut=setTimeout((function(){a.getData()}),500)):this.getData()},selected:function(t){this.$router.push({name:"user",query:{id_business:t.id,keywordCompanyMb:this.keyword}})},clearKeyword:function(){this.keyword="",this.getData()}}},o=i,c=a("2877"),l=Object(c["a"])(o,n,r,!1,null,null,null);e["default"]=l.exports},d26a:function(t,e,a){"use strict";a("f2af")},f2af:function(t,e,a){},fb12:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var n=[{value:1,label:"Hoạt động"},{value:0,label:"Tạm khóa"}]},ff34:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid user-management-show py-3"},[a("div",{staticClass:"row"},[a("div",{class:"web"===t.$detect?"col-6":"col-12"},[a("div",{staticClass:"d-flex"},[a("div",{class:{"mr-3 avatar":!0,"flex-grow-0 flex-shrink-0":"mobile"===t.$detect}},[a("imageBlock",{attrs:{url:t.$getUrlImage(t.urlAvatar),edit:!1}})],1),a("div",{class:{"d-flex flex-column align-items-left justify-content-center overflow-hidden":!0,"pl-4":"web"===t.$detect,"pl-0":"mobile"===t.$detect}},[a("h3",{class:{"h5 font-weight-bold":"mobile"===t.$detect}},[t._v(t._s(t.userName))]),"mobile"===t.$detect&&t.bad_bebit?a("p",{staticClass:"mb-2 font-weight-bold"},[t._v("Tình trạng: Nợ xấu")]):t._e(),"mobile"===t.$detect?a("p",{staticClass:"m-0"},[t._v("Cập nhật lần cuối "+t._s(t.timeUpdate))]):t._e()])])]),"web"===t.$detect?a("div",{staticClass:"col-6"},[a("div",{class:{"d-flex h-100 flex-column":!0,"justify-content-between":t.bad_bebit,"justify-content-end":!t.bad_bebit}},[t.bad_bebit?a("p",{staticClass:"mb-2 font-weight-bold text-right"},[t._v("Tình trạng: Nợ xấu")]):t._e(),a("p",{staticClass:"m-0 text-right"},[t._v("Cập nhật lần cuối "+t._s(t.timeUpdate))])])]):t._e()]),a("div",{staticClass:"row mt-4 mx-0 rounded px-0 px-lg-4 py-2 py-lg-3 shadow-sm bg-light"},[t._m(0),a("div",{staticClass:"col-12"},[a("form",[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"font-weight-bold col-form-label col-12 col-lg-2"},[t._v("Họ tên")]),a("div",{staticClass:"col-12 col-lg-10"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formUpdate.name,expression:"formUpdate.name"}],staticClass:"form-control size-input",class:{"is-invalid":t.errors.name},attrs:{type:"text",placeholder:"Họ tên",disabled:!t.$myCanUpdate()},domProps:{value:t.formUpdate.name},on:{input:function(e){e.target.composing||t.$set(t.formUpdate,"name",e.target.value)}}}),a("form-invalid",{attrs:{error:t.errors.name}})],1)]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"font-weight-bold col-form-label col-12 col-lg-2"},[t._v("Số điện thoại")]),a("div",{staticClass:"col-12 col-lg-10"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formUpdate.phone,expression:"formUpdate.phone"}],staticClass:"form-control size-input",class:{"is-invalid":t.errors.phone},attrs:{type:"text",placeholder:"Số điện thoại",disabled:!t.$myCanUpdate()},domProps:{value:t.formUpdate.phone},on:{input:function(e){e.target.composing||t.$set(t.formUpdate,"phone",e.target.value)}}}),a("form-invalid",{attrs:{error:t.errors.phone}})],1)]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"font-weight-bold col-form-label col-12 col-lg-2"},[t._v("Loại tài khoản")]),a("div",{staticClass:"col-12 col-lg-10"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formUpdate.borrowed_money,expression:"formUpdate.borrowed_money"}],staticClass:"form-control size-input",class:{"is-invalid":t.errors.borrowed_money},attrs:{type:"text",placeholder:"Số điện thoại",disabled:!0},domProps:{value:t.formUpdate.borrowed_money},on:{input:function(e){e.target.composing||t.$set(t.formUpdate,"borrowed_money",e.target.value)}}})])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"font-weight-bold col-form-label col-12 col-lg-2"},[t._v("Mật khẩu mới")]),a("div",{staticClass:"col-12 col-lg-10"},[a("input-password",{staticClass:"size-input",class:{"is-invalid":t.errors.password},attrs:{placeholder:"Mật khẩu mới",disabled:!t.$myCanUpdate()},model:{value:t.formUpdate.password,callback:function(e){t.$set(t.formUpdate,"password",e)},expression:"formUpdate.password"}}),a("form-invalid",{attrs:{error:t.errors.password}})],1)]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"font-weight-bold col-form-label col-12 col-lg-2"},[t._v("Xác nhận mật khẩu mới")]),a("div",{staticClass:"col-12 col-lg-10"},[a("input-password",{staticClass:"size-input",class:{"is-invalid":t.errors.password_confirm},attrs:{placeholder:"Nhập lại mật khẩu",disabled:!t.$myCanUpdate()},model:{value:t.formUpdate.password_confirm,callback:function(e){t.$set(t.formUpdate,"password_confirm",e)},expression:"formUpdate.password_confirm"}}),a("form-invalid",{attrs:{error:t.errors.password_confirm}})],1)]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"font-weight-bold col-form-label col-12 col-lg-2"},[t._v("Kích hoạt tài khoản")]),a("div",{staticClass:"col-12 col-lg-10"},[a("div",{class:{"form-check-inline":!0,"is-invalid":t.errors.active}},[a("label",{staticClass:"form-check-label d-flex align-items-center mr-5"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formUpdate.active,expression:"formUpdate.active"}],staticClass:"form-check-input",attrs:{type:"radio",name:"optradio",value:"1",disabled:!t.$myCanUpdate()},domProps:{checked:t._q(t.formUpdate.active,"1")},on:{change:function(e){return t.$set(t.formUpdate,"active","1")}}}),t._v("Kích hoạt ")]),a("label",{staticClass:"form-check-label d-flex align-items-center"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formUpdate.active,expression:"formUpdate.active"}],staticClass:"form-check-input",attrs:{type:"radio",name:"optradio",value:"0",disabled:!t.$myCanUpdate()},domProps:{checked:t._q(t.formUpdate.active,"0")},on:{change:function(e){return t.$set(t.formUpdate,"active","0")}}}),t._v("Tạm khóa ")])]),a("form-invalid",{attrs:{error:t.errors.active}})],1)]),t.$myCanUpdate()?a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-12"},[a("button",{class:{"btn btn-primary px-5 size-button":!0,"mt-2 w-100 is-tablet":"mobile"===t.$detect},attrs:{disabled:t.loading},on:{click:function(e){return e.preventDefault(),t.updateChange()}}},[t._v(" Cập nhật thay đổi ")])])]):t._e()])])]),t.bankAccount?a("div",{staticClass:"row mt-4 mx-0 rounded px-0 px-lg-4 py-2 py-lg-3 shadow-sm bg-light"},[t._m(1),a("div",{staticClass:"col-12 col-lg-8"},[a("form",[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"font-weight-bold col-form-label col-12 col-lg-3"},[t._v("Số tiền đã ứng")]),a("div",{staticClass:"col-12 col-lg-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.money_loan,expression:"money_loan"}],staticClass:"form-control size-input",attrs:{type:"text",placeholder:"Số tiền đã ứng",disabled:""},domProps:{value:t.money_loan},on:{input:function(e){e.target.composing||(t.money_loan=e.target.value)}}})])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"font-weight-bold col-form-label col-12 col-lg-3"},[t._v("Công ty")]),a("div",{staticClass:"col-12 col-lg-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.business.name,expression:"business.name"}],staticClass:"form-control size-input",attrs:{type:"text",placeholder:"Công ty",disabled:""},domProps:{value:t.business.name},on:{input:function(e){e.target.composing||t.$set(t.business,"name",e.target.value)}}})])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"font-weight-bold col-form-label col-12 col-lg-3"},[t._v("Tên ngân hàng")]),a("div",{staticClass:"col-12 col-lg-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.bankAccount.bank,expression:"bankAccount.bank"}],staticClass:"form-control size-input",attrs:{type:"text",placeholder:"Tên ngân hàng",disabled:""},domProps:{value:t.bankAccount.bank},on:{input:function(e){e.target.composing||t.$set(t.bankAccount,"bank",e.target.value)}}})])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"font-weight-bold col-form-label col-12 col-lg-3"},[t._v("Tên chủ thẻ")]),a("div",{staticClass:"col-12 col-lg-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.bankAccount.bank_name,expression:"bankAccount.bank_name"}],staticClass:"form-control size-input",attrs:{type:"text",placeholder:"Tên chủ thẻ",disabled:""},domProps:{value:t.bankAccount.bank_name},on:{input:function(e){e.target.composing||t.$set(t.bankAccount,"bank_name",e.target.value)}}})])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"font-weight-bold col-form-label col-12 col-lg-3"},[t._v("Số tài khoản ngân hàng")]),a("div",{staticClass:"col-12 col-lg-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.bankAccount.bank_number,expression:"bankAccount.bank_number"}],staticClass:"form-control size-input",attrs:{type:"text",placeholder:"Số tài khoản ngân hàng",disabled:""},domProps:{value:t.bankAccount.bank_number},on:{input:function(e){e.target.composing||t.$set(t.bankAccount,"bank_number",e.target.value)}}})])])])]),a("div",{staticClass:"col-12 col-lg-4"},[a("div",{staticClass:"d-lg-flex justify-content-lg-center"},[a("div",[a("p",{staticClass:"mb-2 font-weight-bold"},[t._v("Ảnh thẻ ngân hàng")]),a("div",{staticClass:"card-image"},[a("imageBlock",{attrs:{url:t.$getUrlImage(t.bankAccount.image),edit:!1}})],1)])])])]):t._e(),t.formOCR?a("div",{staticClass:"row mt-4 mx-0 rounded px-0 px-lg-4 py-2 py-lg-3 shadow-sm bg-light"},[t._m(2),a("div",{staticClass:"col-12 col-lg-4"},[a("div",[a("p",{staticClass:"mb-2 font-weight-bold"},[t._v("Ảnh căn cước công dân mặt trước")]),a("div",{staticClass:"card-image"},[a("imageBlock",{attrs:{url:t.$getUrlImage(t.formOCR.image.front),edit:!1}})],1)]),a("div",{staticClass:"mt-3 mt-lg-5"},[a("p",{staticClass:"mb-2 font-weight-bold"},[t._v("Ảnh căn cước công dân mặt sau")]),a("div",{staticClass:"card-image"},[a("imageBlock",{attrs:{url:t.$getUrlImage(t.formOCR.image.backside),edit:!1}})],1)])]),a("div",{staticClass:"col-12 col-lg-8"},[a("table",{staticClass:"table mt-3 mt-lg-0"},[a("tbody",[a("tr",[a("th",{staticClass:"font-weight-bold pt-0"},[t._v("Số căn cước")]),a("td",{staticClass:"pt-0"},[t._v(t._s(t.formOCR.id_number))])]),a("tr",[a("th",{staticClass:"font-weight-bold "},[t._v("Họ và Tên")]),a("td",[t._v(t._s(t.formOCR.name))])]),a("tr",[a("th",{staticClass:"font-weight-bold "},[t._v("Ngày sinh")]),a("td",[t._v(t._s(t.formOCR.birthday))])]),a("tr",[a("th",{staticClass:"font-weight-bold "},[t._v("Giới tính")]),a("td",[1===t.formOCR.sex?a("span",[t._v("Nam")]):a("span",[t._v("Nữ")])])]),a("tr",[a("th",{staticClass:"font-weight-bold "},[t._v("Quê quán")]),a("td",[t._v(t._s(t.formOCR.home_town))])]),a("tr",[a("th",{staticClass:"font-weight-bold "},[t._v("Ngày cấp")]),a("td",[t._v(t._s(t.formOCR.date_range))])]),a("tr",[a("th",{staticClass:"font-weight-bold "},[t._v("Nơi cấp")]),a("td",[t._v(t._s(t.formOCR.issued_by))])])])])])]):t._e(),t.portrait?a("div",{staticClass:"row mt-4 mx-0 rounded px-0 px-lg-4 py-2 py-lg-3 shadow-sm bg-light"},[a("div",{staticClass:"col-12"},[a("p",{staticClass:"mb-2 font-weight-bold"},[t._v("Ảnh chân dung")]),a("div",{staticClass:"rounded border",staticStyle:{width:"150px",height:"200px"}},[a("imageBlock",{attrs:{url:t.$getUrlImage(""),edit:!1}})],1)])]):t._e(),a("div",{staticClass:"mt-4 mx-0 rounded px-0 px-lg-4 py-2 py-lg-3 shadow-sm bg-light"},[a("p",{staticClass:"col-12 font-weight-bold p-0 mb-3 h5"},[t._v("Thông tin ứng lương")]),a("div",{staticClass:"table-responsive"},[a("table",{class:{"table table-striped":!0,"table-mobile":"mobile"===t.$detect}},[t._m(3),a("tbody",[t._l(t.loans,(function(e,n){return a("tr",{key:n},[a("td",[t._v(t._s(n+1))]),a("td",[t._v(t._s(e.loan))]),a("td",[t._v(t._s(e.disbursement_date))]),a("td",[t._v(t._s(e.type))]),e.show?a("td",{staticClass:"text-right"},["web"===t.$detect?a("button",{staticClass:"btn btn-primary",on:{click:function(a){return t.goDetail(e,"web")}}},[t._v(" Chi tiết ")]):a("button",{staticClass:"btn btn-primary",on:{click:function(a){return t.goDetail(e,"mobile")}}},[t._v(" Chi tiết ")])]):a("td")])})),a("no-data",{attrs:{data:t.loans,colspan:5}})],2)])])]),"web"===t.$detect?a("detailLoan",{attrs:{visible:t.dialogDetail,infoLoan:t.infoLoan},on:{"update:visible":function(e){t.dialogDetail=e}}}):t._e()],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 mb-2 mb-lg-3"},[a("h5",{staticClass:"mb-0 font-weight-bold"},[t._v("Thông tin hồ sơ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 mb-lg-3"},[a("h5",{staticClass:"mb-0 font-weight-bold"},[t._v("Thông tin")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 mb-2 mb-lg-3"},[a("h5",{staticClass:"mb-0 font-weight-bold"},[t._v("Thông tin OCR")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("STT")]),a("th",[t._v("Số tiền ứng")]),a("th",[t._v("Thời gian")]),a("th",[t._v("Trạng thái")]),a("th",{staticClass:"text-center",attrs:{width:"100px"}},[t._v("Chi tiết")])])])}],s=a("1da1"),i=(a("96cf"),a("d3b7"),a("3ca3"),a("ddb0"),a("b0c0"),a("0949")),o=a("1938"),c={components:{imageBlock:function(){return a.e("chunk-7cec0722").then(a.bind(null,"1f7e"))},detailLoan:function(){return a.e("chunk-4c6e4894").then(a.bind(null,"ce5e"))}},data:function(){return{infoLoan:{},loans:{},dialogDetail:!1,dialog:!1,date:{date_from:"",date_to:""},isShowPlhd1:!0,isShowPlhd2:!0,id:this.$route.params.id,timeUpdate:"",bad_bebit:"",urlAvatar:"",userName:"",errors:{},loading:!1,formUpdate:{name:"",phone:"",password:"",password_confirm:"",lastLogin:"",active:"",borrowed_money:""},bankAccount:"",business:{},formOCR:"",portrait:"",list_transaction:[],page:"",money_loan:""}},created:function(){this.id&&(this.getData(),this.getLoans())},watch:{"date.date_from":function(t){this.isShowPlhd1=""===t},"date.date_to":function(t){this.isShowPlhd2=""===t}},methods:{getData:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["b"])(t.id).then((function(e){if(e.data.success===API_STATUS_SUCCESS){var a=e.data.data;t.urlAvatar=a.avatar,t.bad_bebit=a.bad_bebit,t.userName=a.name,t.timeUpdate=a.time_updated,t.formUpdate.name=a.name,t.formUpdate.phone=a.phone,t.formUpdate.borrowed_money=a.borrowed_money,t.formUpdate.lastLogin=a.last_login,t.formUpdate.active=a.active,t.money_loan=a.money_loan.data.money?t.$formatNumber(a.money_loan.data.money):0,t.bankAccount=a.bankAccount?a.bankAccount:"",a.bankAccount&&(t.bankAccount.bank=a.bankAccount.bank.data.vn_name),t.business=a.business?a.business.data:{},t.formOCR=a.ocr?a.ocr.data:""}else t.$showMessage(e.data.message,"warning")}));case 2:case"end":return e.stop()}}),e)})))()},getLoans:function(){var t=this;Object(o["c"])({id_user:this.id}).then((function(e){t.loans=e.data.data.data}))},goDetail:function(t,e){"web"===e?(this.infoLoan={id_loan:t.id,id_user:t.id_user},this.dialogDetail=!0):this.$router.push({name:"user-detail",query:{redirect:this.$encodeRedirect(this.setQuery()),id_loan:t.id,id_user:t.id_user}})},setQuery:function(){var t={};return this.page>1&&(t.page=this.page),t},updateChange:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$myCanUpdate()){e.next=2;break}return e.abrupt("return");case 2:return t.loading=!0,t.errors={},a={},a.active=parseInt(t.formUpdate.active),null!==t.formUpdate.name&&""!==t.formUpdate.name&&(a.name=t.formUpdate.name),null!==t.formUpdate.phone&&""!==t.formUpdate.phone&&(a.phone=t.formUpdate.phone),null!==t.formUpdate.password&&""!==t.formUpdate.password&&(a.password=t.formUpdate.password),null!==t.formUpdate.password_confirm&&""!==t.formUpdate.password_confirm&&(a.password_confirm=t.formUpdate.password_confirm),e.next=12,Object(i["d"])(t.id,a).then((function(e){e.data.success===API_STATUS_SUCCESS?(t.$showMessage(e.data.message,"success"),t.formUpdate.password="",t.formUpdate.password_confirm="",t.loading=!0,t.getData()):t.$showMessage(e.data.message,"warning")})).catch((function(e){t.requestError(e)}));case 12:t.loading=!1;case 13:case"end":return e.stop()}}),e)})))()},searchDate:function(){},clearFilter:function(){this.date.date_from="",this.date.date_to=""},requestError:function(t){t.status===HTTP_CODE_GONE?this.$showMessage(t.data.message,"warning"):t.status===HTTP_CODE_UNPROCESSABLE_ENTITY&&(this.errors=t.data.data.data)}}},l=c,u=(a("2405"),a("2877")),d=Object(u["a"])(l,n,r,!1,null,null,null);e["default"]=d.exports}}]);
//# sourceMappingURL=user-management.91cde1d4.js.map