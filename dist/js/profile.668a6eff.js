(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["profile"],{"11d7":function(s,t,e){},"591c":function(s,t,e){"use strict";e("11d7")},"9b19":function(s,t,e){"use strict";e.r(t);var a=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"profile p-lg-5 container-fluid"},[e("div",{class:{"pt-3 px-1 p-lg-5":!0,"bg-light":"web"===s.$detect,"bg-mb":"mobile"===s.$detect}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-12"},[e("div",{staticClass:"d-flex align-items-center rounded h-100"},[e("div",{class:{"mr-4 avatar rounded-circle overflow-hidden":!0,"flex-grow-0 flex-shrink-0":"mobile"===s.$detect},style:"web"===s.$detect?"min-width:132px;width: 132px; height: 132px;":"min-width:100px;width: 100px; height: 100px;"},[e("imageBlock",{attrs:{url:s.$getUrlImage(s.infoUser.avatar)},on:{changeFile:s.changeFile}})],1),e("div",{staticClass:"mt-lg-3"},[e("p",{class:{"text-break":!0,"h3 font-weight-bold m-0":"web"===s.$detect,"h5 font-weight-bold m-0":"mobile"===s.$detect}},[s._v(s._s(s.nameUser))]),e("p",{staticClass:"font-weight-bold m-0"},[s._v("ID: "),e("span",{staticClass:"text-success"},[s._v(s._s(s.infoUser.id_custom))])])])])]),e("div",{staticClass:"col-lg-12 mt-3 mt-lg-5"},[e("div",{staticClass:"rounded"},[e("div",{staticClass:"d-flex align-items-center justify-content-between mb-2"},[e("h4",{staticClass:"font-weight-bold m-0"},[s._v("Thông tin")]),e("span",[s._v("Cập nhật lần cuối: "+s._s(s.infoUser.time_updated))])]),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"font-weight-bold col-form-label col-12 col-lg-3"},[s._v("Loại tài khoản")]),e("div",{staticClass:"col-12 col-lg-9"},[e("input",{staticClass:"form-control size-input",attrs:{type:"text",placeholder:"Loại Tài khoản",disabled:""},domProps:{value:s.$isAdmin()?"Admin":"Đối tác"}})])]),s.business?e("div",{staticClass:"form-group row"},[e("label",{staticClass:"font-weight-bold col-form-label col-12 col-lg-3"},[s._v("Tên công ty")]),e("div",{staticClass:"col-12 col-lg-9"},[e("input",{staticClass:"form-control size-input",attrs:{type:"text",placeholder:"Loại Tài khoản",disabled:""},domProps:{value:s.business}})])]):s._e(),s.permissions?e("div",{staticClass:"form-group row"},[e("label",{staticClass:"font-weight-bold col-form-label col-12 col-lg-3"},[s._v("Danh sách phân quyền")]),e("div",{staticClass:"col-12 col-lg-9"},[e("div",{staticClass:"bg-white  pl-2 py-1 rounded",staticStyle:{border:"1px solid #ced4da"}},s._l(s.permissions,(function(t,a){return e("p",{key:a,staticClass:"ml-1 m-0"},[s._v(s._s(t.permission))])})),0)])]):s._e(),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"font-weight-bold col-form-label col-12 col-lg-3"},[s._v("User name")]),e("div",{staticClass:"col-12 col-lg-9"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.infoUser.username,expression:"infoUser.username"}],staticClass:"form-control size-input",attrs:{type:"text",placeholder:"User",disabled:""},domProps:{value:s.infoUser.username},on:{input:function(t){t.target.composing||s.$set(s.infoUser,"username",t.target.value)}}})])]),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"font-weight-bold col-form-label col-12 col-lg-3"},[s._v("Họ tên")]),e("div",{staticClass:"col-12 col-lg-9"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.infoUser.name,expression:"infoUser.name"}],staticClass:"form-control size-input",class:{"is-invalid":s.errors.name},attrs:{type:"text",placeholder:"Họ tên"},domProps:{value:s.infoUser.name},on:{input:function(t){t.target.composing||s.$set(s.infoUser,"name",t.target.value)}}}),e("form-invalid",{attrs:{error:s.errors.name}})],1)]),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"font-weight-bold col-form-label col-12 col-lg-3"},[s._v("Số điện thoại")]),e("div",{staticClass:"col-12 col-lg-9"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.infoUser.phone,expression:"infoUser.phone"}],staticClass:"form-control size-input",attrs:{type:"text",placeholder:"Số điện thoại",disabled:""},domProps:{value:s.infoUser.phone},on:{input:function(t){t.target.composing||s.$set(s.infoUser,"phone",t.target.value)}}})])]),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"font-weight-bold col-form-label col-12 col-lg-3"},[s._v("Email")]),e("div",{staticClass:"col-12 col-lg-9"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.infoUser.email,expression:"infoUser.email"}],staticClass:"form-control size-input",class:{"is-invalid":s.errors.email},attrs:{type:"email",placeholder:"Email"},domProps:{value:s.infoUser.email},on:{input:function(t){t.target.composing||s.$set(s.infoUser,"email",t.target.value)}}}),e("form-invalid",{attrs:{error:s.errors.email}})],1)]),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"font-weight-bold col-form-label col-12 col-lg-3"},[s._v("Địa chỉ")]),e("div",{staticClass:"col-12 col-lg-9"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.infoUser.address,expression:"infoUser.address"}],staticClass:"form-control size-input",class:{"is-invalid":s.errors.address},attrs:{type:"text",placeholder:"Địa chỉ"},domProps:{value:s.infoUser.address},on:{input:function(t){t.target.composing||s.$set(s.infoUser,"address",t.target.value)}}}),e("form-invalid",{attrs:{error:s.errors.address}})],1)]),e("div",{staticClass:"form-group row"},[e("div",{staticClass:"col-12 col-lg-3"}),e("div",{staticClass:"col-12 col-lg-9"},[e("div",{class:{"w-100":"mobile"===s.$detect}},[e("button",{class:{"btn btn-primary px-5 mr-md-3 mt-3 btn-responsive":!0,"w-100 size-button":"mobile"===s.$detect},on:{click:function(t){return s.updateProfile()}}},[s._v(" Cập nhật ")])])])])])])])]),e("div",{class:{"mt-3 p-1 p-lg-5  rounded":!0,"bg-light":"web"===s.$detect,"bg-mb":"mobile"===s.$detect}},[s._m(0),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"font-weight-bold col-form-label col-lg-3"},[s._v("Mật khẩu hiện tại")]),e("div",{staticClass:"col-lg-9"},[e("input-password",{staticClass:"size-input",class:{"is-invalid":s.errors.password},attrs:{placeholder:"Mật khẩu hiện tại"},model:{value:s.currentPassword,callback:function(t){s.currentPassword=t},expression:"currentPassword"}}),e("form-invalid",{attrs:{error:s.errors.password}})],1)]),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"font-weight-bold col-form-label col-lg-3"},[s._v("Mật khẩu mới")]),e("div",{staticClass:"col-lg-9"},[e("input-password",{staticClass:"size-input",class:{"is-invalid":s.errors.password_new},attrs:{placeholder:"Mật khẩu mới"},model:{value:s.newPassword,callback:function(t){s.newPassword=t},expression:"newPassword"}}),e("form-invalid",{attrs:{error:s.errors.password_new}})],1)]),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"font-weight-bold col-form-label col-lg-3"},[s._v("Xác nhận mật khẩu mới")]),e("div",{staticClass:"col-lg-9"},[e("input-password",{staticClass:"size-input",class:{"is-invalid":s.errors.password_confirm},attrs:{placeholder:"Xác nhận mật khẩu mới"},model:{value:s.confirmPassword,callback:function(t){s.confirmPassword=t},expression:"confirmPassword"}}),e("form-invalid",{attrs:{error:s.errors.password_confirm}})],1)]),e("div",{staticClass:"form-group row"},[e("div",{staticClass:"col-lg-3"}),e("div",{staticClass:"col-lg-9"},[e("div",{class:{"w-100":"mobile"===s.$detect}},[e("button",{class:{"btn btn-primary px-5 mr-md-3 mt-3 btn-responsive":!0,"w-100 size-button":"mobile"===s.$detect},attrs:{disabled:""===s.currentPassword||""===s.newPassword||""===s.confirmPassword},on:{click:function(t){return s.updatePassword()}}},[s._v(" Cập nhật ")])])])])])])},o=[function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",[e("h4",{staticClass:"font-weight-bold "},[s._v("Thay đổi mật khẩu")])])}],i=e("1da1"),r=(e("96cf"),e("d3b7"),e("3ca3"),e("ddb0"),e("b0c0"),e("0ac4")),l={components:{imageBlock:function(){return e.e("chunk-7cec0722").then(e.bind(null,"1f7e"))}},data:function(){return{breadcrumb:[{title:"Trang chủ",name:null},{title:"Thông tin cá nhân",name:null}],nameUser:"",errors:{},infoUser:{},permissions:"",business:"",file:"",currentPassword:"",newPassword:"",confirmPassword:""}},computed:{},watch:{},created:function(){$store.commit("general/setActiveDashboard","10000"),$store.commit("general/setBreadcrumbs",this.breadcrumb),this.$store.state.general.title="Thông tin cá nhân",this.getData()},methods:{getData:function(){var s=this;Object(r["a"])().then((function(t){var e=t.data.user;s.infoUser=e,s.business=e.business?e.business.data.name:"",s.permissions=e.permissions.data,s.nameUser=e.name}))},updateProfile:function(){var s=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s.errors={},e={name:s.infoUser.name,email:s.infoUser.email,address:s.infoUser.address},null!=s.file&&""!=s.file&&void 0!=s.file){t.next=5;break}t.next=7;break;case 5:return t.next=7,s.$uploadFile(s.file).then((function(s){e.avatar=s})).catch((function(t){s.requestError(t)}));case 7:Object(r["e"])(e).then((function(t){s.$showMessage(t.data.message,"success"),s.infoUser=t.data.data,s.nameUser=t.data.data.name,s.$store.state.profile.user.avatar=t.data.data.avatar,s.$store.state.profile.user.name=t.data.data.name})).catch((function(t){s.requestError(t)}));case 8:case"end":return t.stop()}}),t)})))()},changeFile:function(s){this.file=s},updatePassword:function(){var s=this;this.errors={},Object(r["d"])({password:this.currentPassword,password_new:this.newPassword,password_confirm:this.confirmPassword}).then((function(t){t.data.success===API_STATUS_SUCCESS?(s.$showMessage(t.data.message,"success"),s.$logout()):s.$showMessage(t.data.message,"warning")})).catch((function(t){s.requestError(t)}))},requestError:function(s){s.status===HTTP_CODE_GONE?this.$showMessage(s.data.data.message,"warning"):s.status===HTTP_CODE_UNPROCESSABLE_ENTITY&&(this.errors=s.data.data.data)}}},n=l,c=(e("591c"),e("2877")),d=Object(c["a"])(n,a,o,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=profile.668a6eff.js.map