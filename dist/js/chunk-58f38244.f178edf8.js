(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58f38244"],{"668b":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("a4d3"),n("e01a"),n("d3b7"),n("b636"),n("d28b"),n("3ca3"),n("ddb0"),n("d9e2");function i(t){var e,n,i,r=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(n&&null!=(e=t[n]))return e.call(t);if(i&&null!=(e=t[i]))return new a(e.call(t));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function a(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then((function(t){return{value:t,done:e}}))}return a=function(t){this.s=t,this.n=t.next},a.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var n=this.s["return"];return void 0===n?Promise.resolve({value:t,done:!0}):e(n.apply(this.s,arguments))},throw:function(t){var n=this.s["return"];return void 0===n?Promise.reject(t):e(n.apply(this.s,arguments))}},new a(t)}},"7cea":function(t,e,n){"use strict";n("bd16")},b636:function(t,e,n){var i=n("746f");i("asyncIterator")},b939:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-edit position-relative"},[t.disabled?n("div",{staticClass:"p-2 border isDisabled",staticStyle:{"min-height":"40px"},domProps:{innerHTML:t._s(t.content)}}):n("vue-mce",{attrs:{config:t.config},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),n("div",{class:{"dialog-edit":!0,"dialog-edit-mobile":"mobile"==t.$detect}},[n("ldc-dialog",{attrs:{title:"Thêm ảnh",clickoutside:!0,colorTitle:"#007bff",width:"50%",fullscreen:"mobile"==t.$detect,visible:t.dialog},on:{"update:visible":function(e){t.dialog=e}}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"my-img vg-scrollbar"},[n("div",{staticClass:"d-flex flex-wrap px-2 pb-3"},[n("div",{staticClass:"upload-img text-center"},[n("div",{staticClass:"btn-upload",attrs:{role:"button"},on:{click:function(e){return t.upload()}}},[n("i",{staticClass:"icon ion-md-cloud-upload"}),n("p",{staticClass:"mb-0 fs-14px"},[t._v(" Tải ảnh lên ")])])]),t._l(t.images,(function(e,i){return n("div",{key:i,staticClass:"img position-relative",attrs:{role:"button"},on:{click:function(n){return t.pushImage(e)}}},[n("img",{staticClass:"w-100 h-100",attrs:{src:e.url_file}}),t._e(),t.imageSelect.includes(e.url_file)?n("div",{staticClass:"checked-img position-absolute"},[n("div",{staticClass:"btn-check"},[n("i",{staticClass:"icon ion-ios-checkmark"})])]):t._e()])}))],2),t.loadingPage?n("div",{staticClass:"dots-loading mb-3"},[n("div"),n("div"),n("div"),n("div")]):t._e(),n("div",{staticClass:"btn-loadmore-img text-center mb-3"},[t.next_page&&!t.loadingPage?n("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(e){return t.getData(t.next_page)}}},[t._v("Tải thêm ảnh")]):t._e()])]),n("div",{staticClass:"footer-dialog border-top border-primary text-center p-10px"},[n("button",{staticClass:"btn btn-primary btn-sm",attrs:{disabled:t.loading||t.loadingPage},on:{click:function(e){return t.insert()}}},[t._v("Chọn ảnh")])])])],1),n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"input-upload",attrs:{type:"file",multiple:"",accept:"image/*"},on:{change:t.postImage}})],1)},a=[],r=n("1da1"),s=n("668b"),o=(n("caad"),n("2532"),n("d81d"),n("a434"),n("99af"),n("96cf"),n("e333")),c={data:function(){var t=this;return{content:"",config:{theme:"modern",height:400,plugins:"textcolor",toolbar:"styleselect | fontsizeselect | forecolor | bold italic underline | alignleft aligncenter alignright alignjustify | outdent indent | mybutton",fontsize_formats:"8pt 10pt 12pt 14pt 18pt 24pt 36pt",branding:!1,convert_urls:!1,setup:function(e){e.addButton("mybutton",{text:!1,icon:"mce-ico mce-i-image",onclick:function(){t.dialog=!0}})}},dialog:!1,loading:!1,loadingPage:!1,images:[],next_page:0,imageSelect:[],imageSelectDefault:[],files:[]}},props:{value:{type:String,default:""},disabled:{type:Boolean,default:!1}},watch:{defaultContent:function(t){this.setContentEditor()},content:function(t){this.$emit("input",t)},value:function(t){this.content=t}},created:function(){this.setContentEditor(),this.getData()},methods:{setContentEditor:function(){this.content=this.value},postImage:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var i,a,r,o,c,l,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:i=t.target.files,e.loading=!0,a=!1,r=!1,n.prev=4,c=Object(s["a"])(i);case 6:return n.next=8,c.next();case 8:if(!(a=!(l=n.sent).done)){n.next=16;break}if(u=l.value,!e.$fileIsImage(u.type)){n.next=13;break}return n.next=13,e.$uploadFile(u);case 13:a=!1,n.next=6;break;case 16:n.next=22;break;case 18:n.prev=18,n.t0=n["catch"](4),r=!0,o=n.t0;case 22:if(n.prev=22,n.prev=23,!a||null==c.return){n.next=27;break}return n.next=27,c.return();case 27:if(n.prev=27,!r){n.next=30;break}throw o;case 30:return n.finish(27);case 31:return n.finish(22);case 32:return n.next=34,e.getData(1);case 34:e.loading=!1;case 35:case"end":return n.stop()}}),n,null,[[4,18,22,32],[23,,27,31]])})))()},upload:function(){var t=this.$el.querySelector(".input-upload");t.click()},pushImage:function(t){var e=this;this.imageSelect.includes(t.url_file)?this.imageSelect.map((function(n,i){n===t.url_file&&e.imageSelect.splice(i,1)})):this.imageSelect.push(t.url_file)},insert:function(){if(0==this.imageSelect.length)this.$message({message:"Vui lòng chọn ít nhất 1 ảnh",type:"warning",center:!0});else{var t="";this.imageSelect.map((function(e){t+='<img src="'.concat(e,'" alt="').concat(e,'" style="max-width: 100% !important"/>')})),tinymce.activeEditor.execCommand("mceInsertContent",!1,t),this.imageSelect=[],this.dialog=!1}},getData:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.loadingPage=!0,i={type:"image",page:t||1},n.next=4,Object(o["a"])(i).then((function(n){var i=n.data,a=i.data;1==t&&(e.images=[]),a.map((function(t){e.images.push(t)}));var r=i.meta.pagination;r.current_page==r.total_pages?e.next_page=null:e.next_page=r.current_page+1})).catch((function(t){}));case 4:e.loadingPage=!1;case 5:case"end":return n.stop()}}),n)})))()}}},l=c,u=(n("7cea"),n("2877")),d=Object(u["a"])(l,i,a,!1,null,null,null);e["default"]=d.exports},bd16:function(t,e,n){}}]);
//# sourceMappingURL=chunk-58f38244.f178edf8.js.map