(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c1cfbbc"],{"4f05":function(t,e,r){"use strict";r("b1bf")},7978:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"show-onboarding"},[r("ldc-dialog",{attrs:{title:"create"===t.status?"Tạo mới Onboarding":"Chi tiết Onboarding",visible:t.dialog,width:"600px"},on:{"update:visible":function(e){t.dialog=e}}},[r("form",[r("div",{staticClass:"form-group"},[r("label",[t._v("Hình ảnh")]),r("div",{staticClass:"image_onboarding"},[r("imageBlock",{attrs:{url:t.urlImage(),preview:!1,edit:t.$myCanUpdate()},on:{changeFile:t.changeFile}})],1)]),r("div",{staticClass:"form-group"},[r("label",[t._v("Trạng thái")]),r("ldc-select",{class:{"size-input":!0,"is-invalid":t.errors.active},staticStyle:{width:"100%"},attrs:{placeholder:"Trạng thái",disabled:!t.$myCanUpdate()},model:{value:t.form.active,callback:function(e){t.$set(t.form,"active",e)},expression:"form.active"}},t._l(t.optionsActive,(function(t){return r("ldc-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),r("form-invalid",{attrs:{error:t.errors.active}})],1),r("div",{staticClass:"form-group"},[r("label",[t._v("Tiêu đề "),r("span",[t._v("(giới hạn 100 kí tự)")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],class:{"form-control":!0,"is-invalid":t.errors.title},attrs:{type:"text",maxlength:"100",placeholder:"Tiêu đề",disabled:!t.$myCanUpdate()},domProps:{value:t.form.title},on:{input:function(e){e.target.composing||t.$set(t.form,"title",e.target.value)}}}),r("form-invalid",{attrs:{error:t.errors.title}})],1),r("div",{staticClass:"form-group"},[r("label",[t._v("Mô tả "),r("span",[t._v("(giới hạn 100 kí tự)")])]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.content,expression:"form.content"}],class:{"form-control":!0,"is-invalid":t.errors.content},attrs:{type:"text",maxlength:"100",id:"description",placeholder:"Mô tả",disabled:!t.$myCanUpdate()},domProps:{value:t.form.content},on:{input:function(e){e.target.composing||t.$set(t.form,"content",e.target.value)}}}),r("form-invalid",{attrs:{error:t.errors.content}})],1),"create"!==t.status&&t.$myCanUpdate()?r("div",{staticClass:"form-group mb-0"},[r("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.preventDefault(),t.updateOnboarding()}}},[t._v("Cập nhật")])]):t._e(),"create"===t.status&&t.$myCanCreate()?r("div",{staticClass:"form-group mb-0"},[r("button",{staticClass:"btn btn-success",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.addOnboarding()}}},[t._v("Thêm mới")])]):t._e()])])],1)},i=[],n=r("53ca"),o=r("1da1"),s=r("5530"),c=(r("96cf"),r("d3b7"),r("3ca3"),r("ddb0"),r("2b3d"),r("9861"),r("fb12")),l=r("9cc2"),u={props:["visible","status","onboarding"],components:{imageBlock:function(){return r.e("chunk-7cec0722").then(r.bind(null,"1f7e"))}},data:function(){return{dialog:!1,errors:{},optionsActive:c["a"],form:{active:1,content:"",id:"",image:"",title:""}}},watch:{visible:function(t){this.dialog=t,t?this.setForm():this.closeDialog()},dialog:function(t){this.$emit("update:visible",t)}},created:function(){this.setForm(),this.errors={}},methods:{setForm:function(){this.form=Object(s["a"])(Object(s["a"])({},{active:1}),"show"==this.status?this.onboarding:{})},closeDialog:function(){this.errors={}},updateOnboarding:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$myCanUpdate()){e.next=2;break}return e.abrupt("return");case 2:if(r={},t.errors={},r.active=t.form.active,r.title=t.form.title,r.content=t.form.content,"object"!==Object(n["a"])(t.form.image)){e.next=12;break}return e.next=10,t.$uploadFile(t.form.image);case 10:a=e.sent,r.image=a;case 12:return e.next=14,Object(l["e"])(t.form.id,t.$returnForm(r)).then((function(e){var r=e.data;t.form=Object(s["a"])({},r.data),t.$showMessage(r.message),t.$emit("callData",!0),t.dialog=!1})).catch((function(e){t.requestError(e)}));case 14:case"end":return e.stop()}}),e)})))()},addOnboarding:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$myCanCreate()){e.next=2;break}return e.abrupt("return");case 2:return r={},t.errors={},r.active=t.form.active,r.title=t.form.title,r.content=t.form.content,e.next=9,t.$uploadFile(t.form.image);case 9:return a=e.sent,r.image=a,e.next=13,Object(l["a"])(t.$returnForm(r)).then((function(e){var r=e.data;t.$showMessage(r.message),t.$emit("callData",!0),t.dialog=!1})).catch((function(e){t.requestError(e)}));case 13:case"end":return e.stop()}}),e)})))()},requestError:function(t){t.status===HTTP_CODE_GONE?(this.$showMessage(t.data.message,"warning"),this.dialog=!1):t.status===HTTP_CODE_UNPROCESSABLE_ENTITY&&(this.errors=t.data.data.data)},makeUrlFile:function(t){return URL.createObjectURL(t)},urlImage:function(){if("create"==this.status){if(this.form.image)return this.makeUrlFile(this.form.image)}else{if("string"==typeof this.form.image)return this.form.image;if(this.form.image)return this.makeUrlFile(this.form.image)}return""},changeFile:function(t){this.form.image=t}}},m=u,d=(r("4f05"),r("2877")),f=Object(d["a"])(m,a,i,!1,null,null,null);e["default"]=f.exports},b1bf:function(t,e,r){}}]);
//# sourceMappingURL=chunk-3c1cfbbc.865b2e9a.js.map